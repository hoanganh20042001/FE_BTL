{"ast":null,"code":"import _toConsumableArray from \"/home/hoanganh/Desktop/MTAlock/MTAlock/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/hoanganh/Desktop/MTAlock/MTAlock/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/hoanganh/Desktop/MTAlock/MTAlock/Client/src/component/general/commentSection.jsx\";\nimport { Grid, Text, MediaQuery, Textarea, Button, Group } from \"@mantine/core\";\nimport { useViewportSize } from \"@mantine/hooks\";\nimport { useForm } from \"@mantine/form\";\nimport CommentCard from \"./commentCard\";\nimport \"../../css/detail.css\";\nimport React from \"react\";\nimport axios from \"axios\";\nexport default function CommentSection(_ref) {\n  var _this = this;\n  var id = _ref.id;\n  var _useViewportSize = useViewportSize(),\n    height = _useViewportSize.height,\n    width = _useViewportSize.width;\n  var _React$useState = React.useState([]),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    comments = _React$useState2[0],\n    setComments = _React$useState2[1];\n  var user = sessionStorage.getItem(\"userName\");\n  var form = useForm({\n    initialValues: {\n      comment: \"\"\n    }\n  });\n  React.useEffect(function () {\n    axios.get(\"http://localhost:8080/api/comment/\".concat(id)).then(function (response) {\n      if (typeof response.data !== \"string\") {\n        setComments(response.data);\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }, [id]);\n  var handleComment = function handleComment(values) {\n    var data = {\n      content: values.comment,\n      productid: id,\n      username: sessionStorage.getItem(\"userName\")\n    };\n    axios.post(\"http://localhost:8080/api/comment/post\", data).then(function (response) {\n      console.log(response);\n      if (response.status === 200) {\n        setComments(function (o) {\n          return [].concat(_toConsumableArray(o), [{\n            content: values.comment,\n            username: sessionStorage.getItem(\"userName\"),\n            comdate: \"Hôm nay\"\n          }]);\n        });\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n  console.log(comments);\n  return /*#__PURE__*/React.createElement(Grid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MediaQuery, {\n    query: \"(max-width: 1800px) and (min-width: 900px)\",\n    styles: {\n      fontSize: 36,\n      marginLeft: 40,\n      fontWeight: 600\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    className: width < 900 ? \"detail-product-name\" : \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, \"B\\xECnh lu\\u1EADn\"))), /*#__PURE__*/React.createElement(Grid.Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, user ? /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: form.onSubmit(function (values) {\n      return handleComment(values);\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Textarea, Object.assign({\n    placeholder: \"B\\xECnh lu\\u1EADn c\\u1EE7a b\\u1EA1n\",\n    label: \"B\\xECnh lu\\u1EADn c\\u1EE7a b\\u1EA1n\",\n    radius: \"md\",\n    size: \"md\"\n  }, form.getInputProps(\"comment\"), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Group, {\n    position: \"right\",\n    style: {\n      marginTop: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 29\n    }\n  }, \"\\u0110\\u0103ng\")), \" \") : /*#__PURE__*/React.createElement(Text, {\n    size: width > 900 ? \"xl\" : \"lg\",\n    align: \"left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, \"Vui l\\xF2ng \\u0111\\u0103ng nh\\u1EADp \\u0111\\u1EC3 b\\xECnh lu\\u1EADn\")), /*#__PURE__*/React.createElement(Grid.Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, comments.length === 0 ? /*#__PURE__*/React.createElement(Text, {\n    weight: 500,\n    size: width > 900 ? \"xl\" : \"lg\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, \"H\\xE3y l\\xE0 ng\\u01B0\\u1EDDi \\u0111\\u1EA7u ti\\xEAn b\\xECnh lu\\u1EADn v\\u1EC1 s\\u1EA3n ph\\u1EA9m n\\xE0y !\") : comments.map(function (comment) {\n    return /*#__PURE__*/React.createElement(CommentCard, {\n      name: comment.username,\n      date: comment.comdate,\n      content: comment.content,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 29\n      }\n    });\n  })));\n}","map":{"version":3,"names":["Grid","Text","MediaQuery","Textarea","Button","Group","useViewportSize","useForm","CommentCard","React","axios","CommentSection","_ref","_this","id","_useViewportSize","height","width","_React$useState","useState","_React$useState2","_slicedToArray","comments","setComments","user","sessionStorage","getItem","form","initialValues","comment","useEffect","get","concat","then","response","data","catch","error","console","log","handleComment","values","content","productid","username","post","status","o","_toConsumableArray","comdate","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Col","query","styles","fontSize","marginLeft","fontWeight","className","onSubmit","Object","assign","placeholder","label","radius","size","getInputProps","position","style","marginTop","type","align","length","weight","map","name","date"],"sources":["/home/hoanganh/Desktop/MTAlock/MTAlock/Client/src/component/general/commentSection.jsx"],"sourcesContent":["import { Grid, Text, MediaQuery, Textarea, Button, Group } from \"@mantine/core\";\r\nimport { useViewportSize } from \"@mantine/hooks\";\r\nimport { useForm } from \"@mantine/form\";\r\nimport CommentCard from \"./commentCard\";\r\nimport \"../../css/detail.css\";\r\nimport React from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport default function CommentSection({ id }) {\r\n    const { height, width } = useViewportSize();\r\n    const [comments, setComments] = React.useState([]);\r\n    const user = sessionStorage.getItem(\"userName\");\r\n    const form = useForm({\r\n        initialValues: {\r\n            comment: \"\",\r\n        },\r\n    });\r\n\r\n    React.useEffect(() => {\r\n        axios\r\n            .get(`http://localhost:8080/api/comment/${id}`)\r\n            .then((response) => {\r\n                if (typeof response.data !== \"string\") {\r\n                    setComments(response.data);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n    }, [id]);\r\n\r\n    const handleComment = (values) => {\r\n        const data = {\r\n            content: values.comment,\r\n            productid: id,\r\n            username: sessionStorage.getItem(\"userName\"),\r\n        };\r\n        axios\r\n            .post(\r\n                `http://localhost:8080/api/comment/post`,\r\n                data\r\n            )\r\n            .then((response) => {\r\n                console.log(response);\r\n                if (response.status ===200) {\r\n                    setComments((o) => [\r\n                        ...o,\r\n                        {\r\n                            content: values.comment,\r\n                            username: sessionStorage.getItem(\"userName\"),\r\n                            comdate: \"Hôm nay\",\r\n                    \r\n                        },\r\n                    ]);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n    };\r\nconsole.log(comments);\r\n    return (\r\n        <Grid>\r\n            <Grid.Col>\r\n                <MediaQuery\r\n                    query=\"(max-width: 1800px) and (min-width: 900px)\"\r\n                    styles={{\r\n                        fontSize: 36,\r\n                        marginLeft: 40,\r\n                        fontWeight: 600,\r\n                    }}\r\n                >\r\n                    <Text className={width < 900 ? \"detail-product-name\" : \"\"}>\r\n                        Bình luận\r\n                    </Text>\r\n                </MediaQuery>\r\n            </Grid.Col>\r\n            <Grid.Col>\r\n                {user ? (\r\n                    <form\r\n                        onSubmit={form.onSubmit((values) =>\r\n                            handleComment(values)\r\n                        )}\r\n                    >\r\n                        <Textarea\r\n                            placeholder=\"Bình luận của bạn\"\r\n                            label=\"Bình luận của bạn\"\r\n                            radius=\"md\"\r\n                            size=\"md\"\r\n                            {...form.getInputProps(\"comment\")}\r\n                            // value={comments}\r\n                            // onChange={(e) => setComments(e.target.value)}\r\n                        />\r\n                        <Group position=\"right\" style={{ marginTop: 10 }}>\r\n                            <Button type=\"submit\">Đăng</Button>\r\n                        </Group>{\" \"}\r\n                    </form>\r\n                ) : (\r\n                    <Text size={width > 900 ? \"xl\" : \"lg\"} align=\"left\">\r\n                        Vui lòng đăng nhập để bình luận\r\n                    </Text>\r\n                )}\r\n            </Grid.Col>\r\n            <Grid.Col>\r\n                {comments.length === 0 ? (\r\n                    <Text\r\n                        weight={500}\r\n                        size={width > 900 ? \"xl\" : \"lg\"}\r\n                        align=\"center\"\r\n                    >\r\n                        Hãy là người đầu tiên bình luận về sản phẩm này !\r\n                    </Text>\r\n                ) : (\r\n                    comments.map((comment) => {\r\n                        return (\r\n                            <CommentCard\r\n                                name={comment.username}\r\n                                date={comment.comdate}\r\n                                content={comment.content}\r\n                            />\r\n                        );\r\n                    })\r\n                )}\r\n            </Grid.Col>\r\n        </Grid>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}