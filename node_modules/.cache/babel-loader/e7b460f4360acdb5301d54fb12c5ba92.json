{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\HoangAnh\\\\OneDrive\\\\M\\xE1y t\\xEDnh\\\\MTAlock\\\\MTAlock\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Users\\\\HoangAnh\\\\OneDrive\\\\M\\xE1y t\\xEDnh\\\\MTAlock\\\\MTAlock\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\HoangAnh\\\\OneDrive\\\\M\\xE1y t\\xEDnh\\\\MTAlock\\\\MTAlock\\\\Client\\\\src\\\\component\\\\general\\\\commentSection.jsx\";\nimport { Grid, Text, MediaQuery, Textarea, Button, Group } from \"@mantine/core\";\nimport { useViewportSize } from \"@mantine/hooks\";\nimport { useForm } from \"@mantine/form\";\nimport CommentCard from \"./commentCard\";\nimport \"../../css/detail.css\";\nimport React from \"react\";\nimport axios from \"axios\";\nexport default function CommentSection(_ref) {\n  var _this = this;\n  var id = _ref.id;\n  var _useViewportSize = useViewportSize(),\n    height = _useViewportSize.height,\n    width = _useViewportSize.width;\n  var _React$useState = React.useState([]),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    comments = _React$useState2[0],\n    setComments = _React$useState2[1];\n  var user = sessionStorage.getItem(\"userName\");\n  console.log(user);\n  var form = useForm({\n    initialValues: {\n      comment: \"\"\n    }\n  });\n  React.useEffect(function () {\n    axios.get(\"http://localhost:8080/api/comment/\".concat(id)).then(function (response) {\n      if (typeof response.data !== \"string\") {\n        setComments(response.data);\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }, [id]);\n  var handleComment = function handleComment(values) {\n    var data = {\n      content: values.comment,\n      productId: id,\n      userName: sessionStorage.getItem(\"username\")\n    };\n    console.log(data);\n    axios.post(\"http://localhost:8080/api/comment/post\", data).then(function (response) {\n      if (response.data === \"success\") {\n        setComments(function (o) {\n          return [].concat(_toConsumableArray(o), [{\n            content: values.comment,\n            userName: sessionStorage.getItem(\"userName\"),\n            comDate: \"Hôm nay\"\n          }]);\n        });\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n  return /*#__PURE__*/React.createElement(Grid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MediaQuery, {\n    query: \"(max-width: 1800px) and (min-width: 900px)\",\n    styles: {\n      fontSize: 36,\n      marginLeft: 40,\n      fontWeight: 600\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    className: width < 900 ? \"detail-product-name\" : \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }, \"B\\xECnh lu\\u1EADn\"))), /*#__PURE__*/React.createElement(Grid.Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, user ? /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: form.onSubmit(function (values) {\n      return handleComment(values);\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Textarea, Object.assign({\n    placeholder: \"B\\xECnh lu\\u1EADn c\\u1EE7a b\\u1EA1n\",\n    label: \"B\\xECnh lu\\u1EADn c\\u1EE7a b\\u1EA1n\",\n    radius: \"md\",\n    size: \"md\"\n  }, form.getInputProps(\"comment\"), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Group, {\n    position: \"right\",\n    style: {\n      marginTop: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 29\n    }\n  }, \"\\u0110\\u0103ng\")), \" \") : /*#__PURE__*/React.createElement(Text, {\n    size: width > 900 ? \"xl\" : \"lg\",\n    align: \"left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }, \"Vui l\\xF2ng \\u0111\\u0103ng nh\\u1EADp \\u0111\\u1EC3 b\\xECnh lu\\u1EADn\")), /*#__PURE__*/React.createElement(Grid.Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }, comments.length === 0 ? /*#__PURE__*/React.createElement(Text, {\n    weight: 500,\n    size: width > 900 ? \"xl\" : \"lg\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, \"H\\xE3y l\\xE0 ng\\u01B0\\u1EDDi \\u0111\\u1EA7u ti\\xEAn b\\xECnh lu\\u1EADn v\\u1EC1 s\\u1EA3n ph\\u1EA9m n\\xE0y !\") : comments.map(function (comment) {\n    return /*#__PURE__*/React.createElement(CommentCard, {\n      name: comment.userName,\n      date: comment.comDate,\n      content: comment.content,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 29\n      }\n    });\n  })));\n}","map":{"version":3,"names":["Grid","Text","MediaQuery","Textarea","Button","Group","useViewportSize","useForm","CommentCard","React","axios","CommentSection","id","height","width","useState","comments","setComments","user","sessionStorage","getItem","console","log","form","initialValues","comment","useEffect","get","then","response","data","catch","error","handleComment","values","content","productId","userName","post","o","comDate","fontSize","marginLeft","fontWeight","onSubmit","getInputProps","marginTop","length","map"],"sources":["C:/Users/HoangAnh/OneDrive/Máy tính/MTAlock/MTAlock/Client/src/component/general/commentSection.jsx"],"sourcesContent":["import { Grid, Text, MediaQuery, Textarea, Button, Group } from \"@mantine/core\";\r\nimport { useViewportSize } from \"@mantine/hooks\";\r\nimport { useForm } from \"@mantine/form\";\r\nimport CommentCard from \"./commentCard\";\r\nimport \"../../css/detail.css\";\r\nimport React from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport default function CommentSection({ id }) {\r\n    const { height, width } = useViewportSize();\r\n    const [comments, setComments] = React.useState([]);\r\n    const user = sessionStorage.getItem(\"userName\");\r\n    console.log(user);\r\n    const form = useForm({\r\n        initialValues: {\r\n            comment: \"\",\r\n        },\r\n    });\r\n\r\n    React.useEffect(() => {\r\n        axios\r\n            .get(`http://localhost:8080/api/comment/${id}`)\r\n            .then((response) => {\r\n                if (typeof response.data !== \"string\") {\r\n                    setComments(response.data);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n    }, [id]);\r\n\r\n    const handleComment = (values) => {\r\n        const data = {\r\n            content: values.comment,\r\n            productId: id,\r\n            userName: sessionStorage.getItem(\"username\"),\r\n        };\r\nconsole.log(data);\r\n        axios\r\n            .post(\r\n                `http://localhost:8080/api/comment/post`,\r\n                data\r\n            )\r\n            .then((response) => {\r\n                if (response.data === \"success\") {\r\n                    setComments((o) => [\r\n                        ...o,\r\n                        {\r\n                            content: values.comment,\r\n                            userName: sessionStorage.getItem(\"userName\"),\r\n                            comDate: \"Hôm nay\",\r\n                    \r\n                        },\r\n                    ]);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            });\r\n    };\r\n\r\n    return (\r\n        <Grid>\r\n            <Grid.Col>\r\n                <MediaQuery\r\n                    query=\"(max-width: 1800px) and (min-width: 900px)\"\r\n                    styles={{\r\n                        fontSize: 36,\r\n                        marginLeft: 40,\r\n                        fontWeight: 600,\r\n                    }}\r\n                >\r\n                    <Text className={width < 900 ? \"detail-product-name\" : \"\"}>\r\n                        Bình luận\r\n                    </Text>\r\n                </MediaQuery>\r\n            </Grid.Col>\r\n            <Grid.Col>\r\n                {user ? (\r\n                    <form\r\n                        onSubmit={form.onSubmit((values) =>\r\n                            handleComment(values)\r\n                        )}\r\n                    >\r\n                        <Textarea\r\n                            placeholder=\"Bình luận của bạn\"\r\n                            label=\"Bình luận của bạn\"\r\n                            radius=\"md\"\r\n                            size=\"md\"\r\n                            {...form.getInputProps(\"comment\")}\r\n                        />\r\n                        <Group position=\"right\" style={{ marginTop: 10 }}>\r\n                            <Button type=\"submit\">Đăng</Button>\r\n                        </Group>{\" \"}\r\n                    </form>\r\n                ) : (\r\n                    <Text size={width > 900 ? \"xl\" : \"lg\"} align=\"left\">\r\n                        Vui lòng đăng nhập để bình luận\r\n                    </Text>\r\n                )}\r\n            </Grid.Col>\r\n            <Grid.Col>\r\n                {comments.length === 0 ? (\r\n                    <Text\r\n                        weight={500}\r\n                        size={width > 900 ? \"xl\" : \"lg\"}\r\n                        align=\"center\"\r\n                    >\r\n                        Hãy là người đầu tiên bình luận về sản phẩm này !\r\n                    </Text>\r\n                ) : (\r\n                    comments.map((comment) => {\r\n                        return (\r\n                            <CommentCard\r\n                                name={comment.userName}\r\n                                date={comment.comDate}\r\n                                content={comment.content}\r\n                            />\r\n                        );\r\n                    })\r\n                )}\r\n            </Grid.Col>\r\n        </Grid>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}